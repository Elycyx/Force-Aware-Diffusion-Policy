name: fadp

# 不使用延迟补偿（因为没有state观测）
camera_obs_latency: 0.0
obs_down_sample_steps: 3

# 观测和动作的时间窗口
img_obs_horizon: 2
action_horizon: 16

shape_meta: &shape_meta
  # 观测数据（输出到policy）
  obs:
    camera0_rgb:
      shape: [3, 224, 224]
      horizon: ${img_obs_horizon}
      latency_steps: 0
      down_sample_steps: ${obs_down_sample_steps}
      type: rgb
      ignore_by_policy: False
    # 以下state数据用于计算相对action，但不输出给policy
    robot0_eef_pos:
      shape: [3]
      horizon: ${img_obs_horizon}
      latency_steps: 0
      down_sample_steps: ${obs_down_sample_steps}
      type: low_dim
      ignore_by_policy: True  # 不输出给policy
    robot0_eef_rot_axis_angle:
      shape: [3]
      horizon: ${img_obs_horizon}
      latency_steps: 0
      down_sample_steps: ${obs_down_sample_steps}
      type: low_dim
      ignore_by_policy: True  # 不输出给policy
    robot0_gripper_width:
      shape: [1]
      horizon: ${img_obs_horizon}
      latency_steps: 0
      down_sample_steps: ${obs_down_sample_steps}
      type: low_dim
      ignore_by_policy: True  # 不输出给policy
  
  action: 
    shape: [7]  # [x, y, z, rx, ry, rz, gripper] - axis-angle表示
    horizon: ${action_horizon}
    latency_steps: 0
    down_sample_steps: ${obs_down_sample_steps}
    rotation_rep: axis_angle  # 保持原始的axis-angle表示

task_name: &task_name fadp
dataset_path: data/session_20251025_142256/dataset.zarr.zip

pose_repr: &pose_repr
  obs_pose_repr: relative  # 使用相对pose表示
  action_pose_repr: relative

env_runner:
  _target_: diffusion_policy.env_runner.real_pusht_image_runner.RealPushTImageRunner

dataset:
  _target_: diffusion_policy.dataset.fadp_dataset.FadpDataset
  shape_meta: *shape_meta
  dataset_path: ${dataset_path}
  cache_dir: null
  pose_repr: *pose_repr
  action_padding: False
  temporally_independent_normalization: False
  repeat_frame_prob: 0.0
  max_duration: null
  seed: 42
  val_ratio: 0.05
  # 数据增强：对位姿添加高斯噪声（标准差）
  # 分别对应 [x, y, z, rx, ry, rz] 的标准差
  # 也可以使用单个值，所有维度使用相同标准差，例如: pose_noise_scale: 0.05
  pose_noise_scale: [0.0001, 0.0001, 0.0001, 0.001, 0.001, 0.001]

